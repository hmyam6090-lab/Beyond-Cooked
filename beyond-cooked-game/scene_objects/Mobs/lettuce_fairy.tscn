[gd_scene load_steps=16 format=3 uid="uid://o0y1766e2hb3"]

[ext_resource type="ArrayMesh" uid="uid://btwp46pukni0r" path="res://Assets/TutorialKitchen/Assets/obj/food_ingredient_lettuce.obj" id="1_8aluk"]
[ext_resource type="Script" uid="uid://bbv3kn12mq824" path="res://scene_objects/Mobs/lettuce_fairy.gd" id="1_fxs5l"]
[ext_resource type="PackedScene" uid="uid://dirae38d4w66i" path="res://scene_objects/InteractableItems/lettuce.tscn" id="2_wuimf"]
[ext_resource type="PackedScene" uid="uid://dckn1ymejoxjh" path="res://scene_objects/InteractableItems/ChopHealthBar.tscn" id="4_e1o61"]
[ext_resource type="AudioStream" uid="uid://b7ss4wwmooyvu" path="res://Assets/sfx/Cooking/one_cut.wav" id="5_jxa2f"]
[ext_resource type="AudioStream" uid="uid://chl0qajvcaer7" path="res://Assets/sfx/Cooking/knife.mp3" id="6_13y52"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_fxs5l"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_wuimf"]
albedo_color = Color(0, 0, 0, 1)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_e1o61"]
points = PackedVector3Array(-0.4417438, 0.12562789, -0.10220395, 0.534742, 0.70747447, 0.2955506, 0.030673277, 0.7038476, -0.60076123, -0.489235, 0.80831385, 0.28983063, 0.26980668, 0.08750815, 0.324121, 0.30253527, 0.1230829, -0.35791677, -0.2096776, 0.29200214, 0.4977369, -0.34433776, 0.3099003, -0.42650288, -0.021498978, 0.80831385, -0.5734023, 0.51807004, 0.2942439, -0.102245554, 0.5000638, 0.80831385, 0.28983063, 0.23986898, 0.49922282, 0.487456, -0.15682477, 0.08849094, -0.39250246, -0.29397833, 0.08764739, 0.2898204, -0.0035931156, 0.00043475797, -0.034764804, -0.53053415, 0.5309974, -0.034810375, 0.30284855, 0.51417184, -0.44332966, -0.50679904, 0.23879598, 0.12163999, 0.409554, 0.085159436, 0.0858716, 0.13406041, 0.22290687, -0.49911466, -0.30941212, 0.70038503, 0.3979038, 0.18510431, 0.15483016, 0.44570583, 0.5329455, 0.67181593, 0.12121555, -0.52304345, 0.7238299, 0.31173235, 0.372176, 0.22420806, 0.35815787, 0.4974109, 0.2221886, 0.1381979, -0.5399003, 0.30844954, -0.08632058, -0.14065179, 0.22376646, -0.49718145, -0.38075435, 0.22359318, 0.34238046, 0.05034283, 0.7903533, -0.5553713, -0.20784213, 0.6333659, -0.4942803, -0.17633471, 0.11846476, 0.4320515)

[sub_resource type="SphereShape3D" id="SphereShape3D_1mxw2"]

[sub_resource type="SphereShape3D" id="SphereShape3D_jxa2f"]
radius = 4.0

[sub_resource type="Animation" id="Animation_wuimf"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("FoodIngredientLettuce:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("FoodIngredientLettuce:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_1mxw2"]
resource_name = "roam"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("FoodIngredientLettuce:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3, 0.6, 0.9),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0, 0.06981317), Vector3(0, 0, 0), Vector3(0, 0, -0.06981317)]
}

[sub_resource type="Animation" id="Animation_e1o61"]
resource_name = "roam"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("FoodIngredientLettuce:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0, 0.06981317), Vector3(0, 0, 0), Vector3(0, 0, -0.06981317), Vector3(0, 0, 0), Vector3(0, 0, -0.06981317), Vector3(0, 0, 0), Vector3(0, 0, 0.06981317), Vector3(0, 0, 0), Vector3(0, 0, -0.06981317), Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("FoodIngredientLettuce:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.100000024, 0.2, 0.3, 0.39, 0.49, 0.59, 0.69, 0.76, 0.86, 0.96, 1.06),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0.05, 0), Vector3(0, 0, 0), Vector3(0, 0, 0), Vector3(0, 0, 0), Vector3(0, 0.05, 0), Vector3(0, 0, 0), Vector3(0, 0, 0), Vector3(0, 0, 0), Vector3(0, 0.05, 0), Vector3(0, 0, 0), Vector3(0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_jxa2f"]
_data = {
&"RESET": SubResource("Animation_wuimf"),
&"roam": SubResource("Animation_1mxw2"),
&"run": SubResource("Animation_e1o61")
}

[node name="LettuceFairy" type="CharacterBody3D" node_paths=PackedStringArray("anim", "roam_eyes", "flee_eyes", "fairy_model", "healthbar", "healthbar_pivot")]
script = ExtResource("1_fxs5l")
anim = NodePath("AnimationPlayer")
roam_eyes = NodePath("FoodIngredientLettuce/Eyes_normal")
flee_eyes = NodePath("FoodIngredientLettuce/Eyes_running2")
drop_scene = ExtResource("2_wuimf")
fairy_model = NodePath(".")
healthbar = NodePath("Pivot/HealthBar")
healthbar_pivot = NodePath("Pivot")

[node name="FoodIngredientLettuce" type="MeshInstance3D" parent="."]
mesh = ExtResource("1_8aluk")
skeleton = NodePath("")

[node name="Eyes_normal" type="MeshInstance3D" parent="FoodIngredientLettuce"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, -0.17345023, 0.56159157, -0.55742115)
mesh = SubResource("CapsuleMesh_fxs5l")
surface_material_override/0 = SubResource("StandardMaterial3D_wuimf")

[node name="Eyes2" type="MeshInstance3D" parent="FoodIngredientLettuce/Eyes_normal"]
transform = Transform3D(0.9992894, -0.037690178, 0, 0.037690178, 0.9992894, 0, 0, 0, 1, 3.5862134, 0, 0)
mesh = SubResource("CapsuleMesh_fxs5l")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_wuimf")

[node name="Eyes_running2" type="Node3D" parent="FoodIngredientLettuce"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0.50772, -0.57164776)

[node name="Eyes3" type="MeshInstance3D" parent="FoodIngredientLettuce/Eyes_running2"]
transform = Transform3D(0.6768632, 0.736109, 0, -0.736109, 0.6768632, 0, 0, 0, 1, 1.5980699, 0.9912648, 0)
mesh = SubResource("CapsuleMesh_fxs5l")
surface_material_override/0 = SubResource("StandardMaterial3D_wuimf")

[node name="Eyes2" type="MeshInstance3D" parent="FoodIngredientLettuce/Eyes_running2"]
transform = Transform3D(0.66013277, -0.751149, 0, 0.751149, 0.66013277, 0, 0, 0, 1, 1.5862134, 0, 0)
mesh = SubResource("CapsuleMesh_fxs5l")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_wuimf")

[node name="Eyes4" type="MeshInstance3D" parent="FoodIngredientLettuce/Eyes_running2"]
transform = Transform3D(-0.67686325, -0.73610896, 0, 0.73610896, -0.67686325, 0, 0, 0, 1, -1.4137866, 0, 0)
mesh = SubResource("CapsuleMesh_fxs5l")
surface_material_override/0 = SubResource("StandardMaterial3D_wuimf")

[node name="Eyes5" type="MeshInstance3D" parent="FoodIngredientLettuce/Eyes_running2"]
transform = Transform3D(-0.66013265, 0.751149, 0, -0.751149, -0.66013265, 0, 0, 0, 1, -1.4019301, 0.9912648, 0)
mesh = SubResource("CapsuleMesh_fxs5l")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_wuimf")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("ConvexPolygonShape3D_e1o61")

[node name="HurtArea" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.45542026, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="HurtArea"]
shape = SubResource("SphereShape3D_1mxw2")

[node name="PlayerDetector" type="Area3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="PlayerDetector"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6246247, 0)
shape = SubResource("SphereShape3D_jxa2f")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
path_desired_distance = 0.3
target_desired_distance = 0.6

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_jxa2f")
}

[node name="Pivot" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.3218017, 0)

[node name="HealthBar" parent="Pivot" instance=ExtResource("4_e1o61")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5526486, 0, 0)

[node name="SFX" type="Node" parent="."]

[node name="Chopped" type="AudioStreamPlayer3D" parent="SFX"]
stream = ExtResource("5_jxa2f")

[node name="Die" type="AudioStreamPlayer3D" parent="SFX"]
stream = ExtResource("6_13y52")
